(function(d){function j(a){return d([a]).linkUrl().linkUser().linkHash()[0]}function h(a){var b=arguments.length>1?arguments[1]:new Date,c=parseInt((b.getTime()-a)/1E3);c+=b.getTimezoneOffset()*60;b="";return b=c<60?"a minute ago":c<120?"couple of minutes ago":c<2700?parseInt(c/60).toString()+" minutes ago":c<5400?"an hour ago":c<86400?""+parseInt(c/3600).toString()+" hours ago":c<172800?"1 day ago":parseInt(c/86400).toString()+" days ago"}function i(a){console.log(a.created_at);var b="<div class='twitter_post'>";
b+="<span class='screen-name'>"+a.user.screen_name+"</span> ";b+=j(a.text);a=a.created_at.split(" ");time_value=a[1]+" "+a[2]+", "+a[5]+" "+a[3];a=Date.parse(time_value);b+=" <span class='created-at'>"+h(a)+"</span>";b+="</div>";return b}function k(a,b){console.log(a);var c="<div class='lastfm_post'>";if(b)c+="<span class='screen-name'>"+b.username+"</span> ";c+="<span class='lastfm_artist'>"+a.artist["#text"]+"</span> &ndash; ";c+="<span class='lastfm_track'>"+a.name+"</span>";b=b.label_listening_now;
if(a.date){parsed_date=new Date(a.date["#text"]);b=h(parsed_date)}c+=" <span class='created-at'>"+b+"</span>";c+="</div>";return c}jQuery.fn.soliloquy=function(){d(this);var a=this;return{twitter:function(b,c){c=jQuery.extend({},jQuery.fn.soliloquy.defaults_twitter,c);d.getJSON("http://twitter.com/status/user_timeline/"+b+".json?count="+c.posts+"&callback=?",function(e){return a.each(function(){d.each(e,function(g,f){d(a).append(i(f))})})})},twitter_list:function(b,c,e){e=jQuery.extend({},jQuery.fn.soliloquy.defaults_twitter,
e);d.getJSON("http://api.twitter.com/1/"+b+"/lists/"+c+"/statuses.json?per_page="+e.posts+"&callback=?",function(g){return a.each(function(){d.each(g,function(f,l){d(a).append(i(l))})})})},lastfm:function(b){var c=jQuery.extend({},jQuery.fn.soliloquy.defaults_lastfm,b);d.getJSON("http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+c.username+"&api_key="+c.api_key+"&limit="+c.tracks+"&format=json&callback=?",function(e){return a.each(function(){d.each(e.recenttracks.track,function(g,
f){d(a).append(k(f,c))})})})}}};d.fn.extend({linkUrl:function(){var a=[],b=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;this.each(function(){a.push(this.replace(b,'<a href="$1">$1</a>'))});return d(a)},linkUser:function(){var a=[],b=/[\@]+([A-Za-z0-9-_]+)/gi;this.each(function(){a.push(this.replace(b,'<a href="http://twitter.com/$1">@$1</a>'))});return d(a)},linkHash:function(){var a=[],b=/ [\#]+([A-Za-z0-9-_]+)/gi;this.each(function(){a.push(this.replace(b,
' <a href="http://search.twitter.com/search?q=&tag=$1&lang=all">#$1</a>'))});return d(a)}});jQuery.fn.soliloquy.defaults_twitter={posts:10};jQuery.fn.soliloquy.defaults_lastfm={tracks:10,username:"trevorhartman",api_key:"930dbe080df156eb81444b27a63d948b",label_listening_now:"Listening Now"}})(jQuery);
